---
description: Structural Pattern
---

# Composite Pattern

## Intro

- 객체를 트리 구조로 구성한 다음 개발 객체인 것처럼 이러한 구조로 작업할 수 있는 구조적 디자인 패턴

## 문제 상황

- Composite Pattern은 앱의 핵심 모델을 트리로 나타낼 수 있는 경우에만 의미가 있다.

## 적용 가능한 상황

- 나무와 같은 개체 구조를 구현해야 할 때 합성 패턴을 사용한다.
	- 복합 패턴은 공통 인터페이스를 공유하는 두 가지 기본 요소 유형을 제공한다.
	
- 클라이언트 코드가 단순 요소와 복합한 요소를 모두 균일하게 처리하기 위해 사용한다.
	- 복합 패턴으로 정의된 모든 요소는 공통 인터페이스를 공유한다.


## 구현 방법

- 도메인의 핵심 모델이 트리 구조로 표현될 수 있는지 확인하기
	- 단순한 요소와 컨테이너로 나눈다.
	- 컨테이너는 단순 요소와 컨테이너를 모두 포함할 수 있어야 한다.

- 단순 구성 요소와 복합한 구성 요소 모두에 적합한 메서드 목록으로 구성 요소 인터페이스를 선언한다.

- 간단한 요소를 나타내는 리프 클래스를 만든다.

- 복잡한 요소를 나타내는 컨테이너 클래스를 만든다.
	- 이 클래스에서 하위 요소에 대한 참조를 저장하기 위한 배열 필드를 제공한다.
	- 배열은 리프와 컨테이너를 모두 저장할 수 있어야 하므로 구성 요소 인터페이스 유형으로 선언
	- 컴포넌트 인터페이스의 메서드를 구현하는 동안 컨테이너는 대부분의 작업을 하위 요소에 위임해야 한다.
	
- 컨테이너에서 자식 요소를 추가하고 제거하는 방법을 정의한다.


## 장점과 단점

- 복잡한 트리 구조로 더 편리하게 작업할 수 있다.
	- 다형성과 재귀를 유용하게 사용할 수 있다.
	
- OCP 원칙에 따라 기존 코드를 손상시키지 않고 앱에 새 요소 유형을 추가할 수 있다.

- 기능이 너무 많이 다른 클래스에 대한 공통 인터페이스를 제공하기 어려운 문제점이 있다.
	- 특정 시나리오에서는 구성 요소 인터페이스를 과도하게 일반화하기가 어렵다.
