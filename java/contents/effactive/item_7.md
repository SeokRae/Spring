---
description: 다 쓴 객체 참조를 해제하라
---

# 아이템 7

- 객체지향 언어의 메모리 관리에 대한 이야기

## Intro

- 프로그래밍을 하는 동안 메모리를 할당하고 사용하게 되는데 이와 관련된 키워드를 학습하기
  
- 학습 키워드
	- 메모리의 누수
	- 메모리를 사용하는 방식
	- 메모리 사용 시 발생할 수 있는 문제점
	- 메모리 관리 해결책
	- 메모리 모니터링
	
### 문제 상황(메모리의 누수)

- 어떤 자료구조를 사용하는 프로그램을 오래 실행하다 보면 점차 가비지 컬렉션 활동과 메모리 사용량이 늘어나 결국 성능이 저하될 것이다.
- 성능 저하되는 것을 넘어서 디스크 페이징이나 OutOfMemoryError(OOM)을 일으켜 예기지 않게 종료될 수 있다.

### 문제 분석 

- 자바는 가비지 컬렉션이라는 참조하지 않는 객체의 메모리를 회수하는 기능을 갖고 있다.
- 일반적으로 객체는 가비지 컬렉션이 관리하고 참조 하지 않는 객체의 자원을 회수하여 메모리 관리를 더욱 편리하게 관리 할 수 있다.
- 프로그래머가 개발한 코드가 가비지 컬렉션을 통해 관리되지 않고, 다 쓴 참조에 대한 반환을 하지 않아 메모리 누수가 발생한다.

### 메모리를 사용하는 방식(가비지 컬렉션의 활동)

- 메모리 할당

- 메모리 사용

- 메모리 반환(가비지 컬렉션)

### 메모리 사용 시 발생할 수 있는 문제점

- 디스크 페이징
- OutOfMemoryError

### 메모리 관리 해결책

- 참조 값을 담은 변수의 Scope를 활용하는 방법(아이템57)
- 특정 조건하에서 사용할 수 있는 WeakHashMap

### 메모리 관리 모니터링

- jstat
- Java VisualVM
- HPJMeter
